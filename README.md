# Large Language Model Planning Based on Situational Awareness

This is the official datasets and demos of `Large Language Model Planning Based on Situational Awareness`.

The paper is available at [arXiv](http://1) .

<div align="center">
<img src="New_Second_1.pdf">
</div>

## Dataset Introduction
This dataset mainly includes hazardous scenarios from 24 home scenarios. This includes a list of scene, scenario events, planning complexity, detailed scenario descriptions, corresponding image descriptions, best human written finite state machine demonstrations, and approximate visualization images of the finite state machine.		
The detailed scene content can be viewed and used in [CSV
](http://1) or [JSON](http://1) files under `dataset`.		
In addition, we have prepared 600 high-quality multimodal situational awareness planning datasets generated based on the SAP prompt method provided in this article, which can be used for fine-tuning.		

## Quick Start
<div align="center">
<img src="img/image_stepbystep.png">
</div>

The dataset folder contains the main dataset content, including the test set 24_Home_Hazard_Scenario and training set Household_ Safety.
The finite state machine generated by the test mentioned in the paper and the measurement results of the state machine are generated in the folder generated_FSM and eval_result. Among them, regarding generated_FSM and eval_result, the detailed explanation is explained below.
### Generated Results
#### GPT-4 generated [results](http://1)				
1. GPT-4+SAP
The prompt template is shown [here](http://1)				
2. GPT-4
The prompt template is shown [here](http://1)				
#### GPT-3.5 generated [results](http://1)				
1. GPT-3.5+SAP
The prompt template is the same as the other SAP ones.					
The demo is shown [here](http://1)			
2. GPT-3.5
The prompt template is the same as the other without SAP ones.				
#### Claude-2 generated [results](http://1)				
1. Claude2+SAP
The prompt template is the same as the other SAP ones.					
2. Claude2
The prompt template is the same as the other without SAP ones.			
#### Multi-agent test
1. GPT-3.5+SAP
GPT-3.5+SAP was selected as the test baseline.
2. Claude-2 eval
GPT-3.5+SAP would be evaluated according to the best demo in the corresponding scene and generated with feedback.
3. Regenerate with feedback
New FSM result would be generated according to feedback.
4. Claude-2 eval new FSM
GPT-3.5+SAP+feedback would be evaluated with GPT-3.5 based on the best demo. Or evaluated with GPT-4+SIP based on the GPT-3.5+SIP result.
The whole demo is shown as [here](http://1)				
#### Ablation test1 formatting Generation
The format prompt is shown in the prompt template.		
The Ablation tests are only generated by GPT-4.	
1. GPT-4 format wtih SAP
You can find the whole prompt template [here](http://1)			
Generation result [here](http://1)			
2. GPT-4 format wtihout SAP
You can find the whole prompt template [here](http://1)			
Generation result [here](http://1)			
3. Vicuna13b format with SAP 
Only get the generation from Vicuna, not been evaluated.
Generation result [here](http://1)			
#### Ablation test2 Result
The result of ablation study1. Only evaluated by GPT-4.		
##### GPT-4+Zero_shot_COT Generation
The prompt of Zero_shot_COT is: `Let's think step by step.`		
You can find the whole prompt template [here](http://1)				
Generation result [here](http://1)			
##### GPT-4+EP05 Generation
The prompt of EP05 is: `Are you sure thatâ€™s your final answer? It might be worth taking another look.`		
You can find the whole prompt template [here](http://1)				
Generation result [here](http://1)			
##### GPT-4+EP09 Generation
The prompt of EP09 is: `Stay focused and dedicated to your goals. Your consistent efforts will lead to outstanding achievements. `		
You can find the whole prompt template [here](http://1)				
Generation result [here](http://1)			

### Eval Results
The generated FSM are evaluated by GPT-4 and Claude-2.		
Please find out the corresponding result in the folders.
#### Multi-agent SAP rank result
The initial result of GPT-3.5+SAP is used here in the first loop.
The second loop od GPT-3.5+SAP+feedback result is shown [here
](http://1)
#### Group of 6 rank Result
The result of ranking test [here](http://1)				
In the result txt file, x_1 is GPT-4 with SAP, x_2 is GPT-4 without SAP, x_3 is GPT-3.5 with SAP, x_4 is GPT-3.5 without SAP, x_5 is Claude-2 with SAP, x_6 is Claude-2 without SAP.		
#### Group of 4 rank Result
##### GPT-4 & GPT-3.5
The result of ranking test [here](http://1)				
In the result txt file, x_1 is GPT-4 with SAP, x_2 is GPT-4 without SAP, x_3 is GPT-3.5 with SAP, x_4 is GPT-3.5 without SAP.
##### GPT-4 & Claude-2
The result of ranking test [here](http://1)				
In the result txt file, x_1 is GPT-4 with SAP, x_2 is GPT-4 without SAP, x_3 is Claude-2 with SAP, x_4 is Claude-2 without SAP.
#### Pairs rank result
The result of ranking test [here](http://1)				
Only recorded the evaluation of GPT-4.

#### Ablation test1 formatting Result
The result of ablation study1 [here](http://1)				
Only evaluated by Claude-2.		
In the result txt file, x_3 is GPT-4 without SAP and x_4 is GPT-4 with SAP.		
#### Ablation test2 Result
The result of ablation study2 [here](http://1)				
Only evaluated by GPT-4.		
##### GPT-4+SAP & GPT-4+Zero_shot_COT
In the result txt file, x_3 is GPT-4 with Zero_shot_COT and x_4 is GPT-4 with SAP.		

##### GPT-4+SAP & GPT-4+EP05
In the result txt file, x_3 is GPT-4 with EP05 and x_4 is GPT-4 with SAP.		

##### GPT-4+SAP & GPT-4+EP09
In the result txt file, x_3 is GPT-4 with EP09 and x_4 is GPT-4 with SAP.				


## Citation
```

```
